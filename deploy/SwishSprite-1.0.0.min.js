(function(e){"use strict";if(!("namespace"in e)){var t=function(e){for(var t=e.split("."),n=window,i="",r=0,a=t.length;a>r;r++)i=t[r],n[i]=n[i]||{},n=n[i];return n};e.namespace=t}})(window),function(e,t){"use strict";function n(e,t){i.output&&i.output.append('<div class="'+e+'">'+t+"</div>")}var i=function(){},r=e.console!==t;i.GENERAL=0,i.DEBUG=1,i.INFO=2,i.WARN=3,i.ERROR=4,i.minLogLevel=i.GENERAL,i.enabled=!0,i.output=null,i.log=function(e){i.enabled&&i.minLogLevel==i.GENERAL&&r&&(console.log(e),n("general",e))},i.debug=function(e){i.enabled&&i.minLogLevel<=i.DEBUG&&r&&(console.debug(e),n("debug",e))},i.info=function(e){i.enabled&&i.minLogLevel<=i.INFO&&r&&(console.info(e),n("info",e))},i.warn=function(e){i.enabled&&i.minLogLevel<=i.WARN&&r&&(console.warn(e),n("warn",e))},i.error=function(e){i.enabled&&r&&(console.error(e),n("error",e))},i.assert=function(e,t){r&&i.enabled&&console.assert&&(console.assert(e,t),e||n("error",t))},i.dir=function(e){i.minLogLevel==i.GENERAL&&r&&i.enabled&&console.dir(e)},i.clear=function(e){r&&i.enabled&&(console.clear(e),i.output&&i.output.html(""))},i.trace=function(e){i.minLogLevel==i.GENERAL&&r&&i.enabled&&console.trace(e)},e.Debug=i}(window),function(e,t,n){"use strict";var i=function(e,t){this.initialize(e,t)},r=i.prototype,a=null;r._onFocus=null,r._onBlur=null,r._onToggle=null,t.hidden!==n?a="visibilitychange":t.mozHidden!==n?a="mozvisibilitychange":t.msHidden!==n?a="msvisibilitychange":t.webkitHidden!==n&&(a="webkitvisibilitychange"),r.initialize=function(n,i){if(a){this._onBlur=i,this._onFocus=n;var r=function(){t.hidden||t.webkitHidden||t.msHidden||t.mozHidden?i():n()};t.addEventListener(a,r,!1),e.addEventListener("pagehide",i),e.addEventListener("pageshow",n),e.addEventListener("blur",i),e.addEventListener("focus",n),e.addEventListener("visibilitychange",r,!1),this._onToggle=r}},r.destroy=function(){a&&(e.removeEventListener("pagehide",this._onBlur),e.removeEventListener("pageshow",this._onFocus),e.removeEventListener("blur",this._onBlur),e.removeEventListener("focus",this._onFocus),e.addEventListener("visibilitychange",this._onToggle),t.removeEventListener(a,this._onToggle,!1),this._onFocus=null,this._onBlur=null)},namespace("cloudkid").PageVisibility=i}(window,document),function(e,t){"use strict";var n=function(){},i=n.prototype;i._listeners=[],i.dispatchEvent=function(e,n){if(this._listeners[e]!==t)for(var i=this._listeners[e],r=0;i.length>r;r++)i[r](n)},i.addEventListener=function(e,n){this._listeners[e]===t&&(this._listeners[e]=[]),this._listeners[e].push(n)},i.removeEventListener=function(e,n){if(this._listeners[e]){if(n===t)return delete this._listeners[e],t;for(var i=0;this._listeners[e].length>i;i++)if(this._listeners[e][i]===n){this._listeners[e].splice(i,1);break}}},i.removeAllEventListeners=function(){this._listeners={}},namespace("cloudkid").EventDispatcher=n}(window),function(e,t){"use strict";var n=function(e){this.initialize(e)},i=n.prototype=new cloudkid.EventDispatcher,r=null,a=!0,o=!1,s=!1,u=!1,l=!1,c=!1,d=null,p=null,f=null,v=0,m=null,h=0,E=null,g=null,L=null,y=0,b=!1,T=null,S=null,w=null,R=null,P=null,_=-1,D=null;n.LOAD_STARTED="loadStarted",n.LOADED="loaded",n.LOAD_PROGRESS="loadProgress",n.COMPLETE="complete",n.PROGRESS="progress",n.PAUSED="paused",n.RESUMED="unpaused",n.M4A_PADDING=.1,n.VERSION="1.0.0",i.manualUpdate=!1,i.initialize=function(t){var i=cloudkid.AudioUtils;if(!i.supported())throw"HTML5 Audio is not supported!";if(null!==R)throw"SwishSprite instance is already create. Destroy before re-creating";this.clear();var s=null!==t&&"object"==typeof t?i.importSpriteMap(this,t):i.getPlayableURL(t);if(!s)throw"The supplied filetype is unsupported in this browser.";R=this,l=!1,o=!1,a=!0,c=!1,y=0,b=!1,P=new cloudkid.PageVisibility(M,U),_=-1,h=s.indexOf(".m4a")>-1?n.M4A_PADDING:0,r=e.document.createElement("audio"),r.addEventListener("canplay",I),r.addEventListener("canplaythrough",N),r.addEventListener("loadeddata",I),r.addEventListener("loadedmetadata",I),r.addEventListener("progress",I),r.addEventListener("ended",z),r.addEventListener("stalled",x),r.src=s},i.getAudioElement=function(){return r},i.mute=function(){r.volume=0},i.unmute=function(){r.volume=1},i.pause=function(){u=!1,d&&e.clearInterval(d),f&&e.clearTimeout(f);var t=a;r.pause(),a=!0,t||this.dispatchEvent(n.PAUSED)},i.resume=function(){a&&E&&(this.play(E,r.currentTime),this.dispatchEvent(n.RESUMED))},i.stop=function(){this.pause(),E=null},i.getLength=function(e){return e===t&&E!==t?m[E].duration:e!==t?m[e].duration:0},i.getPosition=function(){return E!==t&&m[E]!==t?r.currentTime-m[E].start:0},i.getSound=function(e){return e===t&&E!==t?m[E]:e?m[e]:t},i.setSound=function(e,t,n,i){var r=i?0:h;m[e]={start:t,end:t+n+r,duration:n+r,loop:i}},i.prepare=function(e){m[e]!==t&&(r.currentTime=m[e].start)},i.clear=function(){m={}},i.loadByUserInteraction=function(){if(!l){l=!0;try{p&&e.clearInterval(p),s=!0,this.manualUpdate||(p=e.setInterval(I,10)),r.play(),r.pause()}catch(t){}}},i.update=function(){s&&I(),u&&A()},i.play=function(i,o){var s;if(L=0,u=!1,e.clearInterval(d),e.clearTimeout(f),m[i]===t)return Debug.error("SoundUnknown: Sound not found. Playing sound '"+i+"' has failed."),!1;var l=m[i];s=l.start,o!==t&&o>=l.start&&l.end>o&&(s=o);try{g=!1,r.pause(),T=r.currentTime;try{r.currentTime=D=s}catch(c){Debug.error("CurrentTimeSetException: Setting the current time has failed: "+c)}if(Math.abs(r.currentTime-s)>.5)return!0;E=i,a=!1,r.play();var p=Math.max(0,Math.min((r.currentTime-m[E].start)/m[E].duration,1));R.dispatchEvent(n.PROGRESS,p),f=e.setTimeout(k,1e3*m[E].duration+500),u=!0,this.manualUpdate||(d=e.setInterval(A,10))}catch(c){return Debug.error("SoundPlayException: Sound Playback has failed: "+c),!1}return!0};var A=function(){var t,i=m[E];if(!g&&e.Math.abs(r.currentTime-T)>.1)g=!0,T=r.currentTime,f&&e.clearTimeout(f),t=i.end-r.currentTime,e.Math.abs(t-i.duration)>.1&&(t=i.duration),f=e.setTimeout(k,1e3*t+500);else if(b||r.currentTime===T){if(g&&b){if(r.currentTime>D){var a=Math.max(0,Math.min((r.currentTime-i.start)/i.duration,1));R.dispatchEvent(n.PROGRESS,a)}D=r.currentTime,r.currentTime>=i.end&&z()}}else b=!0,r.currentTime<i.start-.5&&(r.currentTime=i.start)};i.destroy=function(){this.manualUpdate=!1,u=!1,s=!1,d&&e.clearInterval(d),S&&e.clearInterval(S),f&&e.clearTimeout(f),p&&e.clearInterval(p),P&&_pageVisiblity.destroy(),P=null,r.removeEventListener("canplay",I),r.removeEventListener("canplaythrough",N),r.removeEventListener("loadeddata",I),r.removeEventListener("loadedmetadata",I),r.removeEventListener("progress",I),r.removeEventListener("ended",z),r.removeEventListener("stalled",x),this.removeAllEventListeners(),this.stop(),this.clear(),r=null,R=null},i.isLoaded=function(){return o};var O=function(){c||(c=!0,R.dispatchEvent(n.LOAD_STARTED),S=e.setInterval(G,1e3))},U=function(){R&&(-1==_&&(_=a?1:0),R.pause())},M=function(){R&&(0===_&&R.resume(),_=-1)},G=function(){var e=m[E];E?(r.currentTime<e.start-1||r.currentTime>e.end+1?(L+=1,Debug.warn("ScrubberOutOfRange: The scrubber position ("+r.currentTime+") is out of range ("+e.start+" - "+e.end+"). This warning reported "+L+" times."),L>=5&&(r.currentTime=e.start)):L=0,r.currentTime!==w?(y=0,w=r.currentTime):(y++,!a&&y>=5&&r.play())):(L=0,y=0)},I=function(){var i,a=0;if(r.buffered.length&&(a=r.buffered.end(r.buffered.length-1)),!c&&a>0&&r.duration>0&&O(),!o){if(i=Math.max(1,a/r.duration),isNaN(i))return;i!==v&&(v=i,R.dispatchEvent(n.LOAD_PROGRESS,v)),.001>1-i&&(s=!1,e.clearInterval(p),v=1,o=!0,m.silence!==t&&R.play("silence"),R.dispatchEvent(n.LOADED))}},k=function(){{m[E]}},N=function(){O()},x=function(){c||Debug.log("Media stalled before load started")},z=function(){var t=m[E];t&&t.loop?(R.pause(),r.currentTime=t.start,e.setTimeout(function(){R.dispatchEvent(n.PROGRESS,1),R.dispatchEvent(n.COMPLETE),E&&R.play(E)},0)):(R.stop(),R.dispatchEvent(n.PROGRESS,1),R.dispatchEvent(n.COMPLETE))};namespace("cloudkid").SwishSprite=n}(window),function(e,t){"use strict";var n={};n.importSpriteMap=function(e,i){if(i.resources===t)throw"Sprite configuration must contain 'resources': an array of file types";var r=n.getPlayableURL(i.resources);if(i.spritemap===t)throw"Sprite configuration must contain 'spritemap': a dictionary of audio sprites";var a,o;for(o in i.spritemap)a=i.spritemap[o],Debug.log(o),Debug.log(a),e.setSound(o,a.start,a.end-a.start,a.loop);return r},n.supported=function(){return i};var i=function(){var e=document.createElement("audio"),t=!1;try{t=!!e.canPlayType,t&&(t={},t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.oga=t.ogg,t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.caf=e.canPlayType("audio/x-caf").replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}();n.canPlayURL=function(e){if(!i)return!1;var t=e.toLowerCase().match(/\.([a-z0-9]{3})(\?.*)?$/i);return t&&t.length?(t=t[1],i[t]||!1):!1},n.getPlayableURL=function(e){var t,i,r=null;if(e instanceof Array){for(t=0,i=e.length;i>t;t++)if(e[t]instanceof Object){if(n.canPlayURL(e[t].url)){r=e[t].url;break}}else if(n.canPlayURL(e[t])){r=e[t];break}}else n.canPlayURL(e)&&(r=e);return r},namespace("cloudkid").AudioUtils=n}(window);