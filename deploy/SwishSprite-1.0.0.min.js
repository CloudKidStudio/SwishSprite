(function(e){"use strict";if(!("namespace"in e)){var n=function(e){for(var n=e.split("."),t=window,i="",r=0,a=n.length;a>r;r++)i=n[r],t[i]=t[i]||{},t=t[i];return t};e.namespace=n}})(window),function(e,n){"use strict";function t(e,n){i.output&&i.output.append('<div class="'+e+'">'+n+"</div>")}var i=function(){},r=e.console!==n;i.GENERAL=0,i.DEBUG=1,i.INFO=2,i.WARN=3,i.ERROR=4,i.minLogLevel=i.GENERAL,i.enabled=!0,i.output=null,i.log=function(e){i.enabled&&i.minLogLevel==i.GENERAL&&r&&(console.log(e),t("general",e))},i.debug=function(e){i.enabled&&i.minLogLevel<=i.DEBUG&&r&&(console.debug(e),t("debug",e))},i.info=function(e){i.enabled&&i.minLogLevel<=i.INFO&&r&&(console.info(e),t("info",e))},i.warn=function(e){i.enabled&&i.minLogLevel<=i.WARN&&r&&(console.warn(e),t("warn",e))},i.error=function(e){i.enabled&&r&&(console.error(e),t("error",e))},i.assert=function(e,n){r&&i.enabled&&console.assert&&(console.assert(e,n),e||t("error",n))},i.dir=function(e){i.minLogLevel==i.GENERAL&&r&&i.enabled&&console.dir(e)},i.clear=function(e){r&&i.enabled&&(console.clear(e),i.output&&i.output.html(""))},i.trace=function(e){i.minLogLevel==i.GENERAL&&r&&i.enabled&&console.trace(e)},e.Debug=i}(window),function(e,n,t){"use strict";var i=function(e,n){this.initialize(e,n)},r=i.prototype,a=null;r._onFocus=null,r._onBlur=null,r._onToggle=null,n.hidden!==t?a="visibilitychange":n.mozHidden!==t?a="mozvisibilitychange":n.msHidden!==t?a="msvisibilitychange":n.webkitHidden!==t&&(a="webkitvisibilitychange"),r.initialize=function(t,i){if(a){this._onBlur=i,this._onFocus=t;var r=function(){n.hidden||n.webkitHidden||n.msHidden||n.mozHidden?i():t()};n.addEventListener(a,r,!1),e.addEventListener("pagehide",i),e.addEventListener("pageshow",t),e.addEventListener("blur",i),e.addEventListener("focus",t),e.addEventListener("visibilitychange",r,!1),this._onToggle=r}},r.destroy=function(){a&&(e.removeEventListener("pagehide",this._onBlur),e.removeEventListener("pageshow",this._onFocus),e.removeEventListener("blur",this._onBlur),e.removeEventListener("focus",this._onFocus),e.addEventListener("visibilitychange",this._onToggle),n.removeEventListener(a,this._onToggle,!1),this._onFocus=null,this._onBlur=null)},namespace("cloudkid").PageVisibility=i}(window,document),function(e,n){"use strict";var t=function(){},i=t.prototype;i._listeners=[],i.dispatchEvent=function(e,t){if(this._listeners[e]!==n)for(var i=this._listeners[e],r=0;i.length>r;r++)i[r](t)},i.addEventListener=function(e,t){this._listeners[e]===n&&(this._listeners[e]=[]),this._listeners[e].push(t)},i.removeEventListener=function(e,t){if(this._listeners[e]){if(t===n)return delete this._listeners[e],n;for(var i=0;this._listeners[e].length>i;i++)if(this._listeners[e][i]===t){this._listeners[e].splice(i,1);break}}},i.removeAllEventListeners=function(){this._listeners={}},namespace("cloudkid").EventDispatcher=t}(window),function(e,n){"use strict";var t=function(e){this.initialize(e)},i=t.prototype=new cloudkid.EventDispatcher,r=null,a=!0,o=!1,s=!1,u=!1,l=!1,c=!1,d=null,p=null,f=null,v=0,h=null,m=null,E=null,g=null,L=0,y=!1,b=null,T=null,S=null,w=null,P=null,R=-1,_=null;t.LOAD_STARTED="loadStarted",t.LOADED="loaded",t.LOAD_PROGRESS="loadProgress",t.COMPLETE="complete",t.PROGRESS="progress",t.PAUSED="paused",t.UNPAUSED="unpaused",t.VERSION="1.0.0",i.manualUpdate=!1,i.initialize=function(n){var t=cloudkid.AudioUtils;if(!t.supported())throw"HTML5 Audio is not supported!";if(null!==w)throw"SwishSprite instance is already create. Destroy before re-creating";var i=t.getPlayableURL(n);if(!i)throw"The supplied filetype is unsupported in this browser.";w=this,l=!1,o=!1,a=!0,c=!1,L=0,y=!1,P=new cloudkid.PageVisibility(U,O),R=-1,this.clear(),r=e.document.createElement("audio"),r.addEventListener("canplay",G),r.addEventListener("canplaythrough",M),r.addEventListener("loadeddata",G),r.addEventListener("loadedmetadata",G),r.addEventListener("progress",G),r.addEventListener("ended",z),r.addEventListener("stalled",N),r.src=i},i.getAudioElement=function(){return r},i.mute=function(){r.volume=0},i.unmute=function(){r.volume=1},i.pause=function(){u=!1,d&&e.clearInterval(d),f&&e.clearTimeout(f);var n=a;r.pause(),a=!0,n||this.dispatchEvent(t.PAUSED)},i.resume=function(){a&&m&&(this.play(m,r.currentTime),this.dispatchEvent(t.UNPAUSED))},i.stop=function(){this.pause(),m=null},i.getLength=function(e){return e===n&&m!==n?h[m].duration:e!==n?h[e].duration:0},i.getPosition=function(){return m!==n&&h[m]!==n?r.currentTime-h[m].start:0},i.getSound=function(e){return e===n&&m!==n?h[m]:e?h[e]:n},i.setSound=function(e,n,t,i){h[e]={start:n,end:n+t,duration:t,loop:i}},i.prepare=function(e){h[e]!==n&&(r.currentTime=h[e].start)},i.clear=function(){h={}},i.loadByUserInteraction=function(){if(!l){l=!0;try{p&&e.clearInterval(p),s=!0,this.manualUpdate||(p=e.setInterval(G,10)),r.play(),r.pause()}catch(n){}}},i.update=function(){s&&G(),u&&A()},i.play=function(i,o){var s;if(g=0,u=!1,e.clearInterval(d),e.clearTimeout(f),h[i]===n)return Debug.error("SoundUnknown: Sound not found. Playing sound '"+i+"' has failed."),!1;var l=h[i];s=l.start,o!==n&&o>=l.start&&l.end>o&&(s=o);try{E=!1,r.pause(),b=r.currentTime;try{r.currentTime=_=s}catch(c){Debug.error("CurrentTimeSetException: Setting the current time has failed: "+c)}if(Math.abs(r.currentTime-s)>.5)return!0;m=i,a=!1,r.play();var p=Math.max(0,Math.min((r.currentTime-h[m].start)/h[m].duration,1));w.dispatchEvent(t.PROGRESS,p),f=e.setTimeout(I,1e3*h[m].duration+500),u=!0,this.manualUpdate||(d=e.setInterval(A,10))}catch(c){return Debug.error("SoundPlayException: Sound Playback has failed: "+c),!1}return!0};var A=function(){var n,i=h[m];if(!E&&e.Math.abs(r.currentTime-b)>.1)E=!0,b=r.currentTime,f&&e.clearTimeout(f),n=i.end-r.currentTime,e.Math.abs(n-i.duration)>.1&&(n=i.duration),f=e.setTimeout(I,1e3*n+500);else if(y||r.currentTime===b){if(E&&y){if(r.currentTime>_){var a=Math.max(0,Math.min((r.currentTime-i.start)/i.duration,1));w.dispatchEvent(t.PROGRESS,a)}_=r.currentTime,r.currentTime>=i.end&&z()}}else y=!0,r.currentTime<i.start-.5&&(r.currentTime=i.start)};i.destroy=function(){this.manualUpdate=!1,u=!1,s=!1,d&&e.clearInterval(d),T&&e.clearInterval(T),f&&e.clearTimeout(f),p&&e.clearInterval(p),P&&_pageVisiblity.destroy(),P=null,r.removeEventListener("canplay",G),r.removeEventListener("canplaythrough",M),r.removeEventListener("loadeddata",G),r.removeEventListener("loadedmetadata",G),r.removeEventListener("progress",G),r.removeEventListener("ended",z),r.removeEventListener("stalled",N),this.removeAllEventListeners(),this.stop(),this.clear(),r=null,w=null},i.isLoaded=function(){return o};var D=function(){c||(c=!0,w.dispatchEvent(t.LOAD_STARTED),T=e.setInterval(k,1e3))},O=function(){w&&(-1==R&&(R=a?1:0),w.pause())},U=function(){w&&(0===R&&w.resume(),R=-1)},k=function(){var e=h[m];m?(r.currentTime<e.start-1||r.currentTime>e.end+1?(g+=1,Debug.warn("ScrubberOutOfRange: The scrubber position ("+r.currentTime+") is out of range ("+e.start+" - "+e.end+"). This warning reported "+g+" times."),g>=5&&(r.currentTime=e.start)):g=0,r.currentTime!==S?(L=0,S=r.currentTime):(L++,!a&&L>=5&&r.play())):(g=0,L=0)},G=function(){var i,a=0;if(r.buffered.length&&(a=r.buffered.end(r.buffered.length-1)),!c&&a>0&&r.duration>0&&D(),!o){if(i=Math.max(1,a/r.duration),isNaN(i))return;i!==v&&(v=i,w.dispatchEvent(t.LOAD_PROGRESS,v)),.001>1-i&&(s=!1,e.clearInterval(p),v=1,o=!0,h.silence!==n&&w.play("silence"),w.dispatchEvent(t.LOADED))}},I=function(){{h[m]}},M=function(){D()},N=function(){c||Debug.log("Media stalled before load started")},z=function(){var n=h[m];n&&n.loop?(w.pause(),r.currentTime=n.start,e.setTimeout(function(){w.dispatchEvent(t.PROGRESS,1),w.dispatchEvent(t.COMPLETE),m&&w.play(m)},0)):(w.stop(),w.dispatchEvent(t.PROGRESS,1),w.dispatchEvent(t.COMPLETE))};namespace("cloudkid").SwishSprite=t}(window),function(e,n){"use strict";var t={};t.createFromSpriteMap=function(e){if(e.resources===n)throw"Sprite configuration must contain a resources Array of file types";var t=new cloudkid.SwishSprite(e.resources);if(e.spritemap===n)throw"Sprite configuration must contain a dictionary of audio sprites";var i,r;for(r in e.spritemap)i=e.spritemap[r],t.setSound(r,i.start,i.end-i.start,i.loop);return t},t.supported=function(){return i};var i=function(){var e=document.createElement("audio"),n=!1;try{n=!!e.canPlayType,n&&(n={},n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.oga=n.ogg,n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.caf=e.canPlayType("audio/x-caf").replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(t){}return n}();t.canPlayURL=function(e){if(!i)return!1;var n=e.toLowerCase().match(/\.([a-z0-9]{3})(\?.*)?$/i);return n&&n.length?(n=n[1],i[n]||!1):!1},t.getPlayableURL=function(e){var n,i,r=null;if(e instanceof Array){for(n=0,i=e.length;i>n;n++)if(e[n]instanceof Object){if(t.canPlayURL(e[n].url)){r=e[n].url;break}}else if(t.canPlayURL(e[n])){r=e[n];break}}else t.canPlayURL(e)&&(r=e);return r},namespace("cloudkid").AudioUtils=t}(window);