!function(e){"use strict";if(!("namespace"in e)){var t=function(e){for(var t=e.split("."),n=window,r="",i=0,a=t.length;a>i;i++)r=t[i],n[r]=n[r]||{},n=n[r];return n};e.namespace=t}}(window),function(e,t){"use strict";function n(e,t){r.output&&r.output.append('<div class="'+e+'">'+t+"</div>")}var r=function(){},i=e.console!==t;r.GENERAL=0,r.DEBUG=1,r.INFO=2,r.WARN=3,r.ERROR=4,r.minLogLevel=r.GENERAL,r.enabled=!0,r.output=null,r.log=function(e){r.enabled&&r.minLogLevel==r.GENERAL&&i&&(console.log(e),n("general",e))},r.debug=function(e){r.enabled&&r.minLogLevel<=r.DEBUG&&i&&(console.debug(e),n("debug",e))},r.info=function(e){r.enabled&&r.minLogLevel<=r.INFO&&i&&(console.info(e),n("info",e))},r.warn=function(e){r.enabled&&r.minLogLevel<=r.WARN&&i&&(console.warn(e),n("warn",e))},r.error=function(e){r.enabled&&i&&(console.error(e),n("error",e))},r.assert=function(e,t){i&&r.enabled&&console.assert&&(console.assert(e,t),e||n("error",t))},r.dir=function(e){r.minLogLevel==r.GENERAL&&i&&r.enabled&&console.dir(e)},r.trace=function(e){r.minLogLevel==r.GENERAL&&i&&r.enabled&&console.trace(e)},e.Debug=r}(window),function(e,t,n){"use strict";var r=function(e,t){this.initialize(e,t)},i=r.prototype,a=null;i._onFocus=null,i._onBlur=null,i._onToggle=null,t.hidden!==n?a="visibilitychange":t.mozHidden!==n?a="mozvisibilitychange":t.msHidden!==n?a="msvisibilitychange":t.webkitHidden!==n&&(a="webkitvisibilitychange"),i.initialize=function(n,r){if(a){this._onBlur=r,this._onFocus=n;var i=function(){t.hidden||t.webkitHidden||t.msHidden||t.mozHidden?r():n()};t.addEventListener(a,i,!1),e.addEventListener("pagehide",r),e.addEventListener("pageshow",n),e.addEventListener("blur",r),e.addEventListener("focus",n),e.addEventListener("visibilitychange",i,!1),this._onToggle=i}},i.destroy=function(){a&&(e.removeEventListener("pagehide",this._onBlur),e.removeEventListener("pageshow",this._onFocus),e.removeEventListener("blur",this._onBlur),e.removeEventListener("focus",this._onFocus),e.addEventListener("visibilitychange",this._onToggle),t.removeEventListener(a,this._onToggle,!1),this._onFocus=null,this._onBlur=null)},namespace("cloudkid").PageVisibility=r}(window,document),function(e,t){"use strict";function n(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof e}var r=function(){},i=r.prototype;i._listeners=[],i.trigger=function(e,n){if(this._listeners[e]!==t)for(var r=this._listeners[e],i=0;i<r.length;i++)r[i](n)},i.on=function(e,t){if("object"===n(e))for(var r in e)e.hasOwnProperty(r)&&this.on(r,e[r]);else if("function"===n(t))for(var i=e.split(" "),a=null,o=0,s=i.length;s>o;o++)a=i[o],this._listeners[a]=this._listeners[a]||[],-1===this._callbackIndex(a,t)&&this._listeners[a].push(t);else if("array"===n(t))for(var u=0,l=t.length;l>u;u++)this.on(e,t[u]);return this},i.off=function(e,r){if(e===t)this._listeners=[];else if("array"===n(r))for(var i=0,a=r.length;a>i;i++)this.off(e,r[i]);else for(var o=e.split(" "),s=null,u=0,l=o.length;l>u;u++)if(s=o[u],this._listeners[s]=this._listeners[s]||[],r===t)this._listeners[s].length=0;else{var c=this._callbackIndex(s,r);-1!==c&&this._listeners[e].splice(c,1)}return this},i._callbackIndex=function(e,t){for(var n=0,r=this._listeners[e].length;r>n;n++)if(this._listeners[e][n]===t)return n;return-1},namespace("cloudkid").EventDispatcher=r}(window),function(e,t){"use strict";var n=function(e){this.initialize(e)},r=n.prototype=new cloudkid.EventDispatcher,i=null,a=!0,o=!1,s=!1,u=!1,l=!1,c=!1,d=null,f=null,p=null,h=0,g=null,v=0,m=null,E=null,y=null,L=0,b=!1,T=null,S=null,w=null,P=null,R=null,_=-1,D=null;n.LOAD_STARTED="loadStarted",n.LOADED="loaded",n.LOAD_PROGRESS="loadProgress",n.COMPLETE="complete",n.PROGRESS="progress",n.PAUSED="paused",n.RESUMED="resumed",n.STOPPED="stopped",n.STARTED="started",n.M4A_PADDING=.1,n.VERSION="1.0.3",r.manualUpdate=!1,r.initialize=function(t){var r=cloudkid.AudioUtils;if(!r.supported())throw"HTML5 Audio is not supported!";if(null!==P)throw"SwishSprite instance is already create. Destroy before re-creating";this.clear();var s=null!==t&&"object"==typeof t?r.importSpriteMap(this,t):r.getPlayableURL(t);if(!s)throw"The supplied filetype is unsupported in this browser.";P=this,l=!1,o=!1,a=!0,c=!1,L=0,b=!1,R=new cloudkid.PageVisibility(M,U),_=-1,v=s.indexOf(".m4a")>-1?n.M4A_PADDING:0,i=e.document.createElement("audio"),i.addEventListener("canplay",k),i.addEventListener("canplaythrough",N),i.addEventListener("loadeddata",k),i.addEventListener("loadedmetadata",k),i.addEventListener("progress",k),i.addEventListener("ended",z),i.addEventListener("stalled",x),i.src=s},r.getAudioElement=function(){return i},r.mute=function(){return i.volume=0,this},r.unmute=function(){return i.volume=1,this},r.pause=function(){u=!1,d&&e.clearInterval(d),p&&e.clearTimeout(p);var t=a;return i.pause(),a=!0,t||this.trigger(n.PAUSED),this},r.resume=function(){return a&&m&&(this.play(m,i.currentTime),this.trigger(n.RESUMED)),this},r.stop=function(){return null!==m&&this.trigger(n.STOPPED),this.pause(),m=null,this},r.getLength=function(e){return e===t&&m!==t?g[m].duration:e!==t?g[e].duration:0},r.getPosition=function(){return m!==t&&g[m]!==t?i.currentTime-g[m].start:0},r.getSound=function(e){return e===t&&m!==t?g[m]:e?g[e]:void 0},r.setSound=function(e,t,n,r){var i=r?0:v;return g[e]={start:t-i,end:t+n+i,duration:n+2*i,loop:r},this},r.prepare=function(e){g[e]!==t&&(i.currentTime=g[e].start)},r.clear=function(){return g={},this},r.load=function(){if(!l){l=!0;try{if(f&&e.clearInterval(f),s=!0,this.manualUpdate||(f=e.setInterval(k,10)),g.silence===t)throw"'silence' audio is required";this.play("silence")}catch(n){}}return this},r.update=function(){s&&k(),u&&A()},r.play=function(r,o){var s;if(y=0,u=!1,e.clearInterval(d),e.clearTimeout(p),g[r]===t)return Debug.error("SoundUnknown: Sound not found. Playing sound '"+r+"' has failed."),!1;var l=g[r];s=l.start,o!==t&&o>=l.start&&o<l.end&&(s=o);try{E=!1,i.pause(),T=i.currentTime;try{i.currentTime=D=s}catch(c){Debug.error("CurrentTimeSetException: Setting the current time has failed: "+c)}if(Math.abs(i.currentTime-s)>.5)return!0;m=r,a=!1,i.play(),P.trigger(n.STARTED);var f=Math.max(0,Math.min((i.currentTime-g[m].start)/g[m].duration,1));P.trigger(n.PROGRESS,f),p=e.setTimeout(G,1e3*g[m].duration+500),u=!0,this.manualUpdate||(d=e.setInterval(A,10))}catch(c){return Debug.error("SoundPlayException: Sound Playback has failed: "+c),!1}return!0};var A=function(){var t,r=g[m];if(!E&&e.Math.abs(i.currentTime-T)>.1)E=!0,T=i.currentTime,p&&e.clearTimeout(p),t=r.end-i.currentTime,e.Math.abs(t-r.duration)>.1&&(t=r.duration),p=e.setTimeout(G,1e3*t+500);else if(b||i.currentTime===T){if(E&&b){if(i.currentTime>D){var a=Math.max(0,Math.min((i.currentTime-r.start)/r.duration,1));P.trigger(n.PROGRESS,a)}D=i.currentTime,i.currentTime>=r.end&&z()}}else b=!0,i.currentTime<r.start-.5&&(i.currentTime=r.start)};r.destroy=function(){this.manualUpdate=!1,u=!1,s=!1,d&&e.clearInterval(d),S&&e.clearInterval(S),p&&e.clearTimeout(p),f&&e.clearInterval(f),R&&R.destroy(),R=null,i.removeEventListener("canplay",k),i.removeEventListener("canplaythrough",N),i.removeEventListener("loadeddata",k),i.removeEventListener("loadedmetadata",k),i.removeEventListener("progress",k),i.removeEventListener("ended",z),i.removeEventListener("stalled",x),this.off(),this.stop(),this.clear(),i=null,P=null},r.isLoaded=function(){return o};var O=function(){c||(c=!0,P.trigger(n.LOAD_STARTED),S=e.setInterval(I,1e3))},U=function(){P&&(-1==_&&(_=a?1:0),P.pause())},M=function(){P&&(0===_&&P.resume(),_=-1)},I=function(){var e=g[m];m?(i.currentTime<e.start-1||i.currentTime>e.end+1?(y+=1,Debug.warn("ScrubberOutOfRange: The scrubber position ("+i.currentTime+") is out of range ("+e.start+" - "+e.end+"). This warning reported "+y+" times."),y>=5&&(i.currentTime=e.start)):y=0,i.currentTime!==w?(L=0,w=i.currentTime):(L++,!a&&L>=5&&i.play())):(y=0,L=0)},k=function(){var r,a=0;if(i.buffered.length&&(a=i.buffered.end(i.buffered.length-1)),!c&&a>0&&i.duration>0&&O(),!o){if(r=Math.max(1,a/i.duration),isNaN(r))return;r!==h&&(h=r,P.trigger(n.LOAD_PROGRESS,h)),.001>1-r&&(s=!1,e.clearInterval(f),h=1,o=!0,g.silence!==t&&P.play("silence"),P.trigger(n.LOADED))}},G=function(){g[m]},N=function(){O()},x=function(){c||Debug.log("Media stalled before load started")},z=function(){var t=g[m];t&&t.loop?(P.pause(),i.currentTime=t.start,e.setTimeout(function(){P.trigger(n.PROGRESS,1),P.trigger(n.COMPLETE),m&&P.play(m)},0)):(P.stop(),P.trigger(n.PROGRESS,1),P.trigger(n.COMPLETE))};namespace("cloudkid").SwishSprite=n}(window),function(e,t){"use strict";var n={};n.importSpriteMap=function(e,r){if(r.resources===t)throw"Sprite configuration must contain 'resources': an array of file types";var i=n.getPlayableURL(r.resources);if(r.spritemap===t)throw"Sprite configuration must contain 'spritemap': a dictionary of audio sprites";var a,o;for(o in r.spritemap)a=r.spritemap[o],e.setSound(o,a.start,a.end-a.start,a.loop);return i},n.supported=function(){return r};var r=function(){var e=document.createElement("audio"),t=!1;try{t=!!e.canPlayType,t&&(t={},t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.oga=t.ogg,t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.caf=e.canPlayType("audio/x-caf").replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}();n.canPlayURL=function(e){if(!r)return!1;var t=e.toLowerCase().match(/\.([a-z0-9]{3})(\?.*)?$/i);return t&&t.length?(t=t[1],r[t]||!1):!1},n.getPlayableURL=function(e){var t,r,i=null;if(e instanceof Array){for(t=0,r=e.length;r>t;t++)if(e[t]instanceof Object){if(n.canPlayURL(e[t].url)){i=e[t].url;break}}else if(n.canPlayURL(e[t])){i=e[t];break}}else n.canPlayURL(e)&&(i=e);return i},namespace("cloudkid").AudioUtils=n}(window);